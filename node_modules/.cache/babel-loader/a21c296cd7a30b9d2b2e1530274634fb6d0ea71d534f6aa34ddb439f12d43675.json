{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rodog\\\\WORKPLACE\\\\react\\\\src\\\\context\\\\CartContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext(undefined);\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [items, setItems] = useState([]);\n  const {\n    user\n  } = useAuth();\n\n  // Load cart from localStorage\n  useEffect(() => {\n    const savedCart = localStorage.getItem(`cart_${(user === null || user === void 0 ? void 0 : user.id) || 'guest'}`);\n    if (savedCart) {\n      setItems(JSON.parse(savedCart));\n    }\n  }, [user]);\n\n  // Save cart to localStorage whenever items change\n  useEffect(() => {\n    localStorage.setItem(`cart_${(user === null || user === void 0 ? void 0 : user.id) || 'guest'}`, JSON.stringify(items));\n  }, [items, user]);\n  const addItem = (product, quantity = 1) => {\n    setItems(prevItems => {\n      const existingItem = prevItems.find(item => item.product.id === product.id);\n      if (existingItem) {\n        return prevItems.map(item => item.product.id === product.id ? {\n          ...item,\n          quantity: item.quantity + quantity\n        } : item);\n      } else {\n        return [...prevItems, {\n          product,\n          quantity\n        }];\n      }\n    });\n  };\n  const removeItem = productId => {\n    setItems(prevItems => prevItems.filter(item => item.product.id !== productId));\n  };\n  const updateQuantity = (productId, quantity) => {\n    if (quantity <= 0) {\n      removeItem(productId);\n      return;\n    }\n    setItems(prevItems => prevItems.map(item => item.product.id === productId ? {\n      ...item,\n      quantity\n    } : item));\n  };\n  const clearCart = () => {\n    setItems([]);\n  };\n  const getTotalPrice = () => {\n    return items.reduce((total, item) => {\n      const price = (user === null || user === void 0 ? void 0 : user.userType) === 'distributor' && item.product.distributorPrice ? item.product.distributorPrice : item.product.price;\n      return total + price * item.quantity;\n    }, 0);\n  };\n  const getItemCount = () => {\n    return items.reduce((count, item) => count + item.quantity, 0);\n  };\n  const value = {\n    items,\n    addItem,\n    removeItem,\n    updateQuantity,\n    clearCart,\n    getTotalPrice,\n    getItemCount\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"bNxdmWYOIOMPfrzDtl6K3fcIzHU=\", false, function () {\n  return [useAuth];\n});\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n_s2(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useAuth","jsxDEV","_jsxDEV","CartContext","undefined","CartProvider","children","_s","items","setItems","user","savedCart","localStorage","getItem","id","JSON","parse","setItem","stringify","addItem","product","quantity","prevItems","existingItem","find","item","map","removeItem","productId","filter","updateQuantity","clearCart","getTotalPrice","reduce","total","price","userType","distributorPrice","getItemCount","count","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/rodog/WORKPLACE/react/src/context/CartContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { CartItem, Product, CartContextType } from '../types';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst CartContext = createContext<CartContextType | undefined>(undefined);\r\n\r\ninterface CartProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const CartProvider: React.FC<CartProviderProps> = ({ children }) => {\r\n  const [items, setItems] = useState<CartItem[]>([]);\r\n  const { user } = useAuth();\r\n\r\n  // Load cart from localStorage\r\n  useEffect(() => {\r\n    const savedCart = localStorage.getItem(`cart_${user?.id || 'guest'}`);\r\n    if (savedCart) {\r\n      setItems(JSON.parse(savedCart));\r\n    }\r\n  }, [user]);\r\n\r\n  // Save cart to localStorage whenever items change\r\n  useEffect(() => {\r\n    localStorage.setItem(`cart_${user?.id || 'guest'}`, JSON.stringify(items));\r\n  }, [items, user]);\r\n\r\n  const addItem = (product: Product, quantity: number = 1) => {\r\n    setItems(prevItems => {\r\n      const existingItem = prevItems.find(item => item.product.id === product.id);\r\n      \r\n      if (existingItem) {\r\n        return prevItems.map(item =>\r\n          item.product.id === product.id\r\n            ? { ...item, quantity: item.quantity + quantity }\r\n            : item\r\n        );\r\n      } else {\r\n        return [...prevItems, { product, quantity }];\r\n      }\r\n    });\r\n  };\r\n\r\n  const removeItem = (productId: string) => {\r\n    setItems(prevItems => prevItems.filter(item => item.product.id !== productId));\r\n  };\r\n\r\n  const updateQuantity = (productId: string, quantity: number) => {\r\n    if (quantity <= 0) {\r\n      removeItem(productId);\r\n      return;\r\n    }\r\n    \r\n    setItems(prevItems =>\r\n      prevItems.map(item =>\r\n        item.product.id === productId\r\n          ? { ...item, quantity }\r\n          : item\r\n      )\r\n    );\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setItems([]);\r\n  };\r\n\r\n  const getTotalPrice = (): number => {\r\n    return items.reduce((total, item) => {\r\n      const price = user?.userType === 'distributor' && item.product.distributorPrice\r\n        ? item.product.distributorPrice\r\n        : item.product.price;\r\n      return total + (price * item.quantity);\r\n    }, 0);\r\n  };\r\n\r\n  const getItemCount = (): number => {\r\n    return items.reduce((count, item) => count + item.quantity, 0);\r\n  };\r\n\r\n  const value: CartContextType = {\r\n    items,\r\n    addItem,\r\n    removeItem,\r\n    updateQuantity,\r\n    clearCart,\r\n    getTotalPrice,\r\n    getItemCount\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={value}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCart = (): CartContextType => {\r\n  const context = useContext(CartContext);\r\n  if (!context) {\r\n    throw new Error('useCart must be used within a CartProvider');\r\n  }\r\n  return context;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}